{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { Ionicons } from '@expo/vector-icons';\nimport { KeyboardAwareScrollView } from 'react-native-keyboard-aware-scroll-view';\nimport io from 'socket.io-client';\nimport axios from 'axios';\nimport { useAuth } from \"../context/AuthContext\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function ChatScreen(_ref) {\n  var route = _ref.route,\n    navigation = _ref.navigation;\n  var _route$params = route.params,\n    userId = _route$params.userId,\n    userName = _route$params.userName,\n    userAvatar = _route$params.userAvatar;\n  var _useAuth = useAuth(),\n    user = _useAuth.user,\n    token = _useAuth.token;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    messages = _useState2[0],\n    setMessages = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    newMessage = _useState4[0],\n    setNewMessage = _useState4[1];\n  var _useState5 = useState(true),\n    _useState6 = _slicedToArray(_useState5, 2),\n    loading = _useState6[0],\n    setLoading = _useState6[1];\n  var _useState7 = useState(null),\n    _useState8 = _slicedToArray(_useState7, 2),\n    socket = _useState8[0],\n    setSocket = _useState8[1];\n  var flatListRef = useRef(null);\n  useEffect(function () {\n    var newSocket = io('http://localhost:3001');\n    setSocket(newSocket);\n    newSocket.emit('join', user.id);\n    newSocket.on('receive_message', function (message) {\n      setMessages(function (prev) {\n        return [].concat(_toConsumableArray(prev), [message]);\n      });\n    });\n    newSocket.on('message_sent', function (message) {\n      setMessages(function (prev) {\n        return [].concat(_toConsumableArray(prev), [message]);\n      });\n    });\n    return function () {\n      newSocket.disconnect();\n    };\n  }, [user.id]);\n  useEffect(function () {\n    fetchMessages();\n  }, [userId]);\n  var fetchMessages = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        var response = yield axios.get(`http://localhost:3001/api/conversations/${userId}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setMessages(response.data);\n      } catch (error) {\n        console.error('Error fetching messages:', error);\n        Alert.alert('Error', 'Failed to load messages');\n      } finally {\n        setLoading(false);\n      }\n    });\n    return function fetchMessages() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var sendMessage = function sendMessage() {\n    if (!newMessage.trim()) return;\n    var messageData = {\n      senderId: user.id,\n      receiverId: userId,\n      text: newMessage.trim()\n    };\n    socket.emit('send_message', messageData);\n    setNewMessage('');\n  };\n  var renderMessage = function renderMessage(_ref3) {\n    var item = _ref3.item;\n    var isOwnMessage = item.senderId === user.id;\n    return _jsx(View, {\n      style: [styles.messageContainer, isOwnMessage ? styles.ownMessageContainer : styles.otherMessageContainer],\n      children: _jsxs(View, {\n        style: [styles.messageBubble, isOwnMessage ? styles.ownMessageBubble : styles.otherMessageBubble],\n        children: [_jsx(Text, {\n          style: [styles.messageText, isOwnMessage ? styles.ownMessageText : styles.otherMessageText],\n          children: item.text\n        }), _jsx(Text, {\n          style: [styles.messageTime, isOwnMessage ? styles.ownMessageTime : styles.otherMessageTime],\n          children: new Date(item.timestamp).toLocaleTimeString([], {\n            hour: '2-digit',\n            minute: '2-digit'\n          })\n        })]\n      })\n    });\n  };\n  var renderSeparator = function renderSeparator() {\n    return _jsx(View, {\n      style: styles.messageSeparator\n    });\n  };\n  if (loading) {\n    return _jsx(View, {\n      style: styles.loadingContainer,\n      children: _jsx(Text, {\n        style: styles.loadingText,\n        children: \"Loading messages...\"\n      })\n    });\n  }\n  return _jsx(View, {\n    style: styles.container,\n    children: _jsxs(KeyboardAvoidingView, {\n      behavior: Platform.OS === 'ios' ? 'padding' : 'height',\n      style: styles.keyboardView,\n      children: [_jsx(FlatList, {\n        ref: flatListRef,\n        data: messages,\n        renderItem: renderMessage,\n        keyExtractor: function keyExtractor(item) {\n          return item.id;\n        },\n        ItemSeparatorComponent: renderSeparator,\n        contentContainerStyle: styles.messagesList,\n        onContentSizeChange: function onContentSizeChange() {\n          var _flatListRef$current;\n          return (_flatListRef$current = flatListRef.current) == null ? void 0 : _flatListRef$current.scrollToEnd({\n            animated: true\n          });\n        },\n        onLayout: function onLayout() {\n          var _flatListRef$current2;\n          return (_flatListRef$current2 = flatListRef.current) == null ? void 0 : _flatListRef$current2.scrollToEnd({\n            animated: true\n          });\n        }\n      }), _jsxs(View, {\n        style: styles.inputContainer,\n        children: [_jsx(View, {\n          style: styles.textInputContainer,\n          children: _jsx(TextInput, {\n            style: styles.textInput,\n            value: newMessage,\n            onChangeText: setNewMessage,\n            placeholder: \"iMessage\",\n            placeholderTextColor: \"#8E8E93\",\n            multiline: true,\n            maxLength: 1000\n          })\n        }), _jsx(TouchableOpacity, {\n          style: [styles.sendButton, !newMessage.trim() && styles.sendButtonDisabled],\n          onPress: sendMessage,\n          disabled: !newMessage.trim(),\n          children: _jsx(Ionicons, {\n            name: \"arrow-up\",\n            size: 20,\n            color: newMessage.trim() ? 'white' : '#C7C7CC'\n          })\n        })]\n      })]\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#F2F2F7'\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#F2F2F7'\n  },\n  loadingText: {\n    fontSize: 16,\n    color: '#8E8E93'\n  },\n  keyboardView: {\n    flex: 1\n  },\n  messagesList: {\n    paddingHorizontal: 16,\n    paddingVertical: 8\n  },\n  messageContainer: {\n    marginVertical: 2\n  },\n  ownMessageContainer: {\n    alignItems: 'flex-end'\n  },\n  otherMessageContainer: {\n    alignItems: 'flex-start'\n  },\n  messageBubble: {\n    maxWidth: '75%',\n    paddingHorizontal: 12,\n    paddingVertical: 8,\n    borderRadius: 18\n  },\n  ownMessageBubble: {\n    backgroundColor: '#007AFF',\n    borderBottomRightRadius: 4\n  },\n  otherMessageBubble: {\n    backgroundColor: '#E5E5EA',\n    borderBottomLeftRadius: 4\n  },\n  messageText: {\n    fontSize: 16,\n    lineHeight: 20\n  },\n  ownMessageText: {\n    color: 'white'\n  },\n  otherMessageText: {\n    color: '#000'\n  },\n  messageTime: {\n    fontSize: 11,\n    marginTop: 4,\n    alignSelf: 'flex-end'\n  },\n  ownMessageTime: {\n    color: 'rgba(255, 255, 255, 0.7)'\n  },\n  otherMessageTime: {\n    color: '#8E8E93'\n  },\n  messageSeparator: {\n    height: 4\n  },\n  inputContainer: {\n    flexDirection: 'row',\n    alignItems: 'flex-end',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    backgroundColor: '#F2F2F7',\n    borderTopWidth: 1,\n    borderTopColor: '#C6C6C8'\n  },\n  textInputContainer: {\n    flex: 1,\n    backgroundColor: 'white',\n    borderRadius: 20,\n    paddingHorizontal: 12,\n    paddingVertical: 8,\n    marginRight: 8,\n    maxHeight: 100,\n    borderWidth: 1,\n    borderColor: '#C7C7CC'\n  },\n  textInput: {\n    fontSize: 16,\n    color: '#000',\n    maxHeight: 80\n  },\n  sendButton: {\n    width: 32,\n    height: 32,\n    borderRadius: 16,\n    backgroundColor: '#007AFF',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  sendButtonDisabled: {\n    backgroundColor: '#E5E5EA'\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","useRef","View","Text","TextInput","TouchableOpacity","FlatList","StyleSheet","KeyboardAvoidingView","Platform","Alert","Ionicons","KeyboardAwareScrollView","io","axios","useAuth","jsx","_jsx","jsxs","_jsxs","ChatScreen","_ref","route","navigation","_route$params","params","userId","userName","userAvatar","_useAuth","user","token","_useState","_useState2","_slicedToArray","messages","setMessages","_useState3","_useState4","newMessage","setNewMessage","_useState5","_useState6","loading","setLoading","_useState7","_useState8","socket","setSocket","flatListRef","newSocket","emit","id","on","message","prev","concat","_toConsumableArray","disconnect","fetchMessages","_ref2","_asyncToGenerator","response","get","headers","Authorization","data","error","console","alert","apply","arguments","sendMessage","trim","messageData","senderId","receiverId","text","renderMessage","_ref3","item","isOwnMessage","style","styles","messageContainer","ownMessageContainer","otherMessageContainer","children","messageBubble","ownMessageBubble","otherMessageBubble","messageText","ownMessageText","otherMessageText","messageTime","ownMessageTime","otherMessageTime","Date","timestamp","toLocaleTimeString","hour","minute","renderSeparator","messageSeparator","loadingContainer","loadingText","container","behavior","OS","keyboardView","ref","renderItem","keyExtractor","ItemSeparatorComponent","contentContainerStyle","messagesList","onContentSizeChange","_flatListRef$current","current","scrollToEnd","animated","onLayout","_flatListRef$current2","inputContainer","textInputContainer","textInput","value","onChangeText","placeholder","placeholderTextColor","multiline","maxLength","sendButton","sendButtonDisabled","onPress","disabled","name","size","color","create","flex","backgroundColor","justifyContent","alignItems","fontSize","paddingHorizontal","paddingVertical","marginVertical","maxWidth","borderRadius","borderBottomRightRadius","borderBottomLeftRadius","lineHeight","marginTop","alignSelf","height","flexDirection","borderTopWidth","borderTopColor","marginRight","maxHeight","borderWidth","borderColor","width"],"sources":["/Users/andrewfreeman/Documents/GitHub/messenger/src/screens/ChatScreen.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport {\n  View,\n  Text,\n  TextInput,\n  TouchableOpacity,\n  FlatList,\n  StyleSheet,\n  KeyboardAvoidingView,\n  Platform,\n  Alert,\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { KeyboardAwareScrollView } from 'react-native-keyboard-aware-scroll-view';\nimport io from 'socket.io-client';\nimport axios from 'axios';\nimport { useAuth } from '../context/AuthContext';\n\nexport default function ChatScreen({ route, navigation }) {\n  const { userId, userName, userAvatar } = route.params;\n  const { user, token } = useAuth();\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [socket, setSocket] = useState(null);\n  const flatListRef = useRef(null);\n\n  useEffect(() => {\n    // Connect to Socket.IO\n    const newSocket = io('http://localhost:3001');\n    setSocket(newSocket);\n\n    // Join user's room\n    newSocket.emit('join', user.id);\n\n    // Listen for incoming messages\n    newSocket.on('receive_message', (message) => {\n      setMessages(prev => [...prev, message]);\n    });\n\n    // Listen for message confirmation\n    newSocket.on('message_sent', (message) => {\n      setMessages(prev => [...prev, message]);\n    });\n\n    return () => {\n      newSocket.disconnect();\n    };\n  }, [user.id]);\n\n  useEffect(() => {\n    fetchMessages();\n  }, [userId]);\n\n  const fetchMessages = async () => {\n    try {\n      const response = await axios.get(`http://localhost:3001/api/conversations/${userId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      setMessages(response.data);\n    } catch (error) {\n      console.error('Error fetching messages:', error);\n      Alert.alert('Error', 'Failed to load messages');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const sendMessage = () => {\n    if (!newMessage.trim()) return;\n\n    const messageData = {\n      senderId: user.id,\n      receiverId: userId,\n      text: newMessage.trim(),\n    };\n\n    socket.emit('send_message', messageData);\n    setNewMessage('');\n  };\n\n  const renderMessage = ({ item }) => {\n    const isOwnMessage = item.senderId === user.id;\n    \n    return (\n      <View style={[\n        styles.messageContainer,\n        isOwnMessage ? styles.ownMessageContainer : styles.otherMessageContainer\n      ]}>\n        <View style={[\n          styles.messageBubble,\n          isOwnMessage ? styles.ownMessageBubble : styles.otherMessageBubble\n        ]}>\n          <Text style={[\n            styles.messageText,\n            isOwnMessage ? styles.ownMessageText : styles.otherMessageText\n          ]}>\n            {item.text}\n          </Text>\n          <Text style={[\n            styles.messageTime,\n            isOwnMessage ? styles.ownMessageTime : styles.otherMessageTime\n          ]}>\n            {new Date(item.timestamp).toLocaleTimeString([], { \n              hour: '2-digit', \n              minute: '2-digit' \n            })}\n          </Text>\n        </View>\n      </View>\n    );\n  };\n\n  const renderSeparator = () => <View style={styles.messageSeparator} />;\n\n  if (loading) {\n    return (\n      <View style={styles.loadingContainer}>\n        <Text style={styles.loadingText}>Loading messages...</Text>\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      <KeyboardAvoidingView\n        behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\n        style={styles.keyboardView}\n      >\n        <FlatList\n          ref={flatListRef}\n          data={messages}\n          renderItem={renderMessage}\n          keyExtractor={(item) => item.id}\n          ItemSeparatorComponent={renderSeparator}\n          contentContainerStyle={styles.messagesList}\n          onContentSizeChange={() => flatListRef.current?.scrollToEnd({ animated: true })}\n          onLayout={() => flatListRef.current?.scrollToEnd({ animated: true })}\n        />\n\n        <View style={styles.inputContainer}>\n          <View style={styles.textInputContainer}>\n            <TextInput\n              style={styles.textInput}\n              value={newMessage}\n              onChangeText={setNewMessage}\n              placeholder=\"iMessage\"\n              placeholderTextColor=\"#8E8E93\"\n              multiline\n              maxLength={1000}\n            />\n          </View>\n          \n          <TouchableOpacity\n            style={[\n              styles.sendButton,\n              !newMessage.trim() && styles.sendButtonDisabled\n            ]}\n            onPress={sendMessage}\n            disabled={!newMessage.trim()}\n          >\n            <Ionicons \n              name=\"arrow-up\" \n              size={20} \n              color={newMessage.trim() ? 'white' : '#C7C7CC'} \n            />\n          </TouchableOpacity>\n        </View>\n      </KeyboardAvoidingView>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#F2F2F7',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#F2F2F7',\n  },\n  loadingText: {\n    fontSize: 16,\n    color: '#8E8E93',\n  },\n  keyboardView: {\n    flex: 1,\n  },\n  messagesList: {\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n  },\n  messageContainer: {\n    marginVertical: 2,\n  },\n  ownMessageContainer: {\n    alignItems: 'flex-end',\n  },\n  otherMessageContainer: {\n    alignItems: 'flex-start',\n  },\n  messageBubble: {\n    maxWidth: '75%',\n    paddingHorizontal: 12,\n    paddingVertical: 8,\n    borderRadius: 18,\n  },\n  ownMessageBubble: {\n    backgroundColor: '#007AFF',\n    borderBottomRightRadius: 4,\n  },\n  otherMessageBubble: {\n    backgroundColor: '#E5E5EA',\n    borderBottomLeftRadius: 4,\n  },\n  messageText: {\n    fontSize: 16,\n    lineHeight: 20,\n  },\n  ownMessageText: {\n    color: 'white',\n  },\n  otherMessageText: {\n    color: '#000',\n  },\n  messageTime: {\n    fontSize: 11,\n    marginTop: 4,\n    alignSelf: 'flex-end',\n  },\n  ownMessageTime: {\n    color: 'rgba(255, 255, 255, 0.7)',\n  },\n  otherMessageTime: {\n    color: '#8E8E93',\n  },\n  messageSeparator: {\n    height: 4,\n  },\n  inputContainer: {\n    flexDirection: 'row',\n    alignItems: 'flex-end',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    backgroundColor: '#F2F2F7',\n    borderTopWidth: 1,\n    borderTopColor: '#C6C6C8',\n  },\n  textInputContainer: {\n    flex: 1,\n    backgroundColor: 'white',\n    borderRadius: 20,\n    paddingHorizontal: 12,\n    paddingVertical: 8,\n    marginRight: 8,\n    maxHeight: 100,\n    borderWidth: 1,\n    borderColor: '#C7C7CC',\n  },\n  textInput: {\n    fontSize: 16,\n    color: '#000',\n    maxHeight: 80,\n  },\n  sendButton: {\n    width: 32,\n    height: 32,\n    borderRadius: 16,\n    backgroundColor: '#007AFF',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  sendButtonDisabled: {\n    backgroundColor: '#E5E5EA',\n  },\n}); "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}